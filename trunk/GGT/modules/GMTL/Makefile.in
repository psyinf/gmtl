# ************************************************************* ggt-head beg
#
# GGT: Generic Graphics Toolkit
#
# Original Authors:
#   Allen Bierbaum
#
# -----------------------------------------------------------------
# File:          $RCSfile: Makefile.in,v $
# Date modified: $Date: 2002-05-04 15:37:30 $
# Version:       $Revision: 1.6 $
# -----------------------------------------------------------------
#
# ********************************************************** ggt-head end
# ************************************************************** ggt-cpr beg
# 
# GGT: The Generic Graphics Toolkit
# Copyright (C) 2001,2002 Allen Bierbaum
#
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 2.1 of the License, or (at your option) any later version.
#
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public
# License along with this library; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
#
# *********************************************************** ggt-cpr end

# -----------------------------------------------------------------------------
# Base variables needed by all makefiles.
# -----------------------------------------------------------------------------
bindir=		@bindir@
datadir=	@datadir@
exec_prefix=	@exec_prefix@
includedir=	@includedir@
instlinks=	$(topdir)/instlinks
libdir=		@libdir@
libexecdir=	@libexecdir@
prefix=		@prefix@
projdatadir=	$(datadir)/gmtl
sbindir=	@sbindir@
sysconfdir=	@sysconfdir@
topdir=		@topdir@
top_srcdir=	@top_srcdir@
GMTLROOT_ABS=	@GMTLROOT_ABS@

MKINSTALLDIRS=	$(top_srcdir)/mkinstalldirs

all buildworld debug optim profiled dbg dbg-dso opt opt-dso prof prof-dso:
	@$(MAKE) devinst

# NOTE: The installation of gmtl-config into $(instlinks)/bin is pretty much
# a hack.
devinst links:
	@echo "------------------------------------------------"
	@echo "Setting up developer installation"
	@echo "------------------------------------------------"
	$(SHELL) $(MKINSTALLDIRS) $(instlinks)/bin
	cp $(topdir)/gmtl-config $(instlinks)/bin
	cd $(instlinks)/bin &&						\
          sed -e 's/^#%{/use_base_dir=yes/' gmtl-config > gmtl-config.tmp && \
          mv gmtl-config.tmp gmtl-config && chmod 755 gmtl-config
	$(SHELL) $(MKINSTALLDIRS) $(instlinks)/include
	$(MAKE) prefix=$(instlinks) install
	@echo "\n\n"
	@echo "---------------------------------------------------------------"
	@echo 'You should now set $$GMTL_BASE_DIR to:'
	@cd $(instlinks) && echo "  `pwd`"
	@echo "---------------------------------------------------------------"

clean-links:
	@echo "------------------------------------------------"
	@echo "Removing developer installation links"
	@echo "------------------------------------------------"
	rm -rf $(instlinks)

release:
ifdef GLOBAL_BUILD
	@$(MAKE) devinst
endif
	@$(MAKE) install
	@$(SHELL) $(MKINSTALLDIRS) $(projdatadir)
	cp $(GMTLROOT_ABS)/ChangeLog $(projdatadir)

install:
	@$(SHELL) $(MKINSTALLDIRS) $(includedir)
	rm -rf $(includedir)/gmtl
	@$(SHELL) $(MKINSTALLDIRS) $(includedir)/gmtl
	cp -p $(GMTLROOT_ABS)/gmtl/*.h $(includedir)/gmtl
	@$(SHELL) $(MKINSTALLDIRS) $(includedir)/gmtl/Fit
	cp -p $(GMTLROOT_ABS)/gmtl/Fit/*.h $(includedir)/gmtl/Fit
	@$(SHELL) $(MKINSTALLDIRS) $(includedir)/gmtl/Numerics
	cp -p $(GMTLROOT_ABS)/gmtl/Numerics/*.h $(includedir)/gmtl/Numerics

clean cleandepend:

clobber:
	@$(MAKE) clean-links
